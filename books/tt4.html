<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TT4 Gallery with Navigation</title>

<style>
  body {
    background: #111; 
    color: #fff; 
    text-align: center; 
    font-family: Arial, sans-serif; 
    margin: 0; 
    padding: 0;
  }

  h1 {
    margin-top: 20px;
    font-size: 28px;
  }

  #viewer {
    max-width: 95%;
    max-height: 70vh;
    margin: 20px auto;
    display: block;
    border-radius: 6px;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
  }

  .nav-btn {
    padding: 10px 20px;
    margin: 10px;
    background: #b93e3e;
    border: none;
    color: white;
    border-radius: 6px;
    font-size: 18px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .nav-btn:hover {
    background: #7a1c1c;
  }

  #counter {
    margin-top: 5px;
    font-size: 18px;
    color: #ccc;
  }

  .dropdown-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 20px 0;
    flex-wrap: wrap;
  }

  .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-select {
    padding: 10px 15px;
    background: #333;
    color: white;
    border: 1px solid #555;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    min-width: 200px;
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 16px;
  }

  .dropdown-select:focus {
    outline: none;
    border-color: #b93e3e;
  }

  .section-dropdown {
    display: none;
  }

  .section-dropdown.active {
    display: inline-block;
  }

  .info-text {
    color: #aaa;
    font-size: 14px;
    margin-top: 10px;
  }

  .page-input-container {
    margin: 15px 0;
  }

  .page-input {
    padding: 8px 12px;
    background: #333;
    color: white;
    border: 1px solid #555;
    border-radius: 6px;
    font-size: 16px;
    width: 80px;
    text-align: center;
  }

  .page-input-btn {
    padding: 8px 15px;
    margin-left: 10px;
    background: #555;
    border: none;
    color: white;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
  }

  .page-input-btn:hover {
    background: #777;
  }

  .password-input {
    padding: 10px 15px;
    background: #333;
    color: white;
    border: 1px solid #555;
    border-radius: 6px;
    font-size: 16px;
    margin: 10px;
    min-width: 200px;
  }

  .password-btn {
    padding: 10px 20px;
    background: #b93e3e;
    border: none;
    color: white;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .password-btn:hover {
    background: #7a1c1c;
  }

  @media (max-width: 768px) {
    .dropdown-container {
      flex-direction: column;
      align-items: center;
    }
    
    .dropdown-select {
      min-width: 80%;
    }
    
    .nav-btn {
      padding: 8px 15px;
      font-size: 16px;
    }
  }
</style>
</head>
<body>

<!-- PASSWORD GATE -->
<div id="password-screen" style="margin-top: 100px;">
  <h1>Enter password</h1>
  <form id="password-form" onsubmit="checkPassword(); return false;">
    <input type="password" id="password-input" class="password-input" placeholder="Password" autocomplete="off">
    <button type="submit" class="password-btn">Submit</button>
  </form>
  <div class="error" id="error-msg" style="color:#f66; margin-top:8px; height:1.2em;"></div>
  <div style="color:#888; margin-top:10px; font-size:14px;">
    Hint: what's your favorite subject, all lowercase.
  </div>
</div>

<!-- REAL PAGE CONTENT -->
<div id="protected-content" style="display:none;">

<h1>TT4 â€“ Page Viewer</h1>

<div class="dropdown-container">
  <div class="dropdown">
    <select id="chapter-select" class="dropdown-select">
      <option value="">Select a Chapter</option>
    </select>
  </div>
  
  <div id="section-dropdown" class="dropdown section-dropdown">
    <select id="section-select" class="dropdown-select">
      <option value="">Select a Section</option>
    </select>
  </div>
</div>

<img id="viewer" src="" alt="TT4 page">

<div>
  <button class="nav-btn" onclick="prev()">&#8592; Previous</button>
  <button class="nav-btn" onclick="next()">Next &#8594;</button>
</div>

<div class="page-input-container">
  <input type="number" id="page-input" class="page-input" min="1" max="333" placeholder="Page">
  <button class="page-input-btn" onclick="goToPageNumber()">Go</button>
</div>

<div id="counter"></div>
<div id="info" class="info-text"></div>

</div>

<script>
  // Simple password check - no complex hashing
  function checkPassword() {
    const input = document.getElementById('password-input').value.toLowerCase().trim();
    const correct = 'maths';  // all lowercase as per hint
    
    if (input === correct) {
      document.getElementById('password-screen').style.display = 'none';
      document.getElementById('protected-content').style.display = 'block';
      initGallery();
    } else {
      document.getElementById('error-msg').textContent = 'Incorrect password';
    }
    return false; // Prevent form submission
  }

  // Allow Enter key to submit password
  document.getElementById('password-input').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      checkPassword();
    }
  });

  // Gallery functionality
  function initGallery() {
    const pages = [
    "001_tt4_cover_001.webp",
    "002_tt4_cover_002.webp",
    "003_tt4_toc_001.webp",
    "004_tt4_toc_002.webp",
    "005_tt4_toc_003.webp",
    "006_tt4_intro_001.webp",
    "007_tt4_main_001.webp",
    "008_tt4_main_002.webp",
    "009_tt4_main_003.webp",
    "010_tt4_main_004.webp",
    "011_tt4_main_005.webp",
    "012_tt4_main_006.webp",
    "013_tt4_main_007.webp",
    "014_tt4_main_008.webp",
    "015_tt4_main_009.webp",
    "016_tt4_main_010.webp",
    "017_tt4_main_011.webp",
    "018_tt4_main_012.webp",
    "019_tt4_main_013.webp",
    "020_tt4_main_014.webp",
    "021_tt4_main_015.webp",
    "022_tt4_main_016.webp",
    "023_tt4_main_017.webp",
    "024_tt4_main_018.webp",
    "025_tt4_main_019.webp",
    "026_tt4_main_020.webp",
    "027_tt4_main_021.webp",
    "028_tt4_main_022.webp",
    "029_tt4_main_023.webp",
    "030_tt4_main_024.webp",
    "031_tt4_main_025.webp",
    "032_tt4_main_026.webp",
    "033_tt4_main_027.webp",
    "034_tt4_main_028.webp",
    "035_tt4_main_029.webp",
    "036_tt4_main_030.webp",
    "037_tt4_main_031.webp",
    "038_tt4_main_032.webp",
    "039_tt4_main_033.webp",
    "040_tt4_main_034.webp",
    "041_tt4_main_035.webp",
    "042_tt4_main_036.webp",
    "043_tt4_main_037.webp",
    "044_tt4_main_038.webp",
    "045_tt4_main_039.webp",
    "046_tt4_main_040.webp",
    "047_tt4_main_041.webp",
    "048_tt4_main_042.webp",
    "049_tt4_main_043.webp",
    "050_tt4_main_044.webp",
    "051_tt4_main_045.webp",
    "052_tt4_main_046.webp",
    "053_tt4_main_047.webp",
    "054_tt4_main_048.webp",
    "055_tt4_main_049.webp",
    "056_tt4_main_050.webp",
    "057_tt4_main_051.webp",
    "058_tt4_main_052.webp",
    "059_tt4_main_053.webp",
    "060_tt4_main_054.webp",
    "061_tt4_main_055.webp",
    "062_tt4_main_056.webp",
    "063_tt4_main_057.webp",
    "064_tt4_main_058.webp",
    "065_tt4_main_059.webp",
    "066_tt4_main_060.webp",
    "067_tt4_main_061.webp",
    "068_tt4_main_062.webp",
    "069_tt4_main_063.webp",
    "070_tt4_main_064.webp",
    "071_tt4_main_065.webp",
    "072_tt4_main_066.webp",
    "073_tt4_main_067.webp",
    "074_tt4_main_068.webp",
    "075_tt4_main_069.webp",
    "076_tt4_main_070.webp",
    "077_tt4_main_071.webp",
    "078_tt4_main_072.webp",
    "079_tt4_main_073.webp",
    "080_tt4_main_074.webp",
    "081_tt4_main_075.webp",
    "082_tt4_main_076.webp",
    "083_tt4_main_077.webp",
    "084_tt4_main_078.webp",
    "085_tt4_main_079.webp",
    "086_tt4_main_080.webp",
    "087_tt4_main_081.webp",
    "088_tt4_main_082.webp",
    "089_tt4_main_083.webp",
    "090_tt4_main_084.webp",
    "091_tt4_main_085.webp",
    "092_tt4_main_086.webp",
    "093_tt4_main_087.webp",
    "094_tt4_main_088.webp",
    "095_tt4_main_089.webp",
    "096_tt4_main_090.webp",
    "097_tt4_main_091.webp",
    "098_tt4_main_092.webp",
    "099_tt4_main_093.webp",
    "100_tt4_main_094.webp",
    "101_tt4_main_095.webp",
    "102_tt4_main_096.webp",
    "103_tt4_main_097.webp",
    "104_tt4_main_098.webp",
    "105_tt4_main_099.webp",
    "106_tt4_main_100.webp",
    "107_tt4_main_101.webp",
    "108_tt4_main_102.webp",
    "109_tt4_main_103.webp",
    "110_tt4_main_104.webp",
    "111_tt4_main_105.webp",
    "112_tt4_main_106.webp",
    "113_tt4_main_107.webp",
    "114_tt4_main_108.webp",
    "115_tt4_main_109.webp",
    "116_tt4_main_110.webp",
    "117_tt4_main_111.webp",
    "118_tt4_main_112.webp",
    "119_tt4_main_113.webp",
    "120_tt4_main_114.webp",
    "121_tt4_main_115.webp",
    "122_tt4_main_116.webp",
    "123_tt4_main_117.webp",
    "124_tt4_main_118.webp",
    "125_tt4_main_119.webp",
    "126_tt4_main_120.webp",
    "127_tt4_main_121.webp",
    "128_tt4_main_122.webp",
    "129_tt4_main_123.webp",
    "130_tt4_main_124.webp",
    "131_tt4_main_125.webp",
    "132_tt4_main_126.webp",
    "133_tt4_main_127.webp",
    "134_tt4_main_128.webp",
    "135_tt4_main_129.webp",
    "136_tt4_main_130.webp",
    "137_tt4_main_131.webp",
    "138_tt4_main_132.webp",
    "139_tt4_main_133.webp",
    "140_tt4_main_134.webp",
    "141_tt4_main_135.webp",
    "142_tt4_main_136.webp",
    "143_tt4_main_137.webp",
    "144_tt4_main_138.webp",
    "145_tt4_main_139.webp",
    "146_tt4_main_140.webp",
    "147_tt4_main_141.webp",
    "148_tt4_main_142.webp",
    "149_tt4_main_143.webp",
    "150_tt4_main_144.webp",
    "151_tt4_main_145.webp",
    "152_tt4_main_146.webp",
    "153_tt4_main_147.webp",
    "154_tt4_main_148.webp",
    "155_tt4_main_149.webp",
    "156_tt4_main_150.webp",
    "157_tt4_main_151.webp",
    "158_tt4_main_152.webp",
    "159_tt4_main_153.webp",
    "160_tt4_main_154.webp",
    "161_tt4_main_155.webp",
    "162_tt4_main_156.webp",
    "163_tt4_main_157.webp",
    "164_tt4_main_158.webp",
    "165_tt4_main_159.webp",
    "166_tt4_main_160.webp",
    "167_tt4_main_161.webp",
    "168_tt4_main_162.webp",
    "169_tt4_main_163.webp",
    "170_tt4_main_164.webp",
    "171_tt4_main_165.webp",
    "172_tt4_main_166.webp",
    "173_tt4_main_167.webp",
    "174_tt4_main_168.webp",
    "175_tt4_main_169.webp",
    "176_tt4_main_170.webp",
    "177_tt4_main_171.webp",
    "178_tt4_main_172.webp",
    "179_tt4_main_173.webp",
    "180_tt4_main_174.webp",
    "181_tt4_main_175.webp",
    "182_tt4_main_176.webp",
    "183_tt4_main_177.webp",
    "184_tt4_main_178.webp",
    "185_tt4_main_179.webp",
    "186_tt4_main_180.webp",
    "187_tt4_main_181.webp",
    "188_tt4_main_182.webp",
    "189_tt4_main_183.webp",
    "190_tt4_main_184.webp",
    "191_tt4_main_185.webp",
    "192_tt4_main_186.webp",
    "193_tt4_main_187.webp",
    "194_tt4_main_188.webp",
    "195_tt4_main_189.webp",
    "196_tt4_main_190.webp",
    "197_tt4_main_191.webp",
    "198_tt4_main_192.webp",
    "199_tt4_main_193.webp",
    "200_tt4_main_194.webp",
    "201_tt4_main_195.webp",
    "202_tt4_main_196.webp",
    "203_tt4_main_197.webp",
    "204_tt4_main_198.webp",
    "205_tt4_main_199.webp",
    "206_tt4_main_200.webp",
    "207_tt4_main_201.webp",
    "208_tt4_main_202.webp",
    "209_tt4_main_203.webp",
    "210_tt4_main_204.webp",
    "211_tt4_main_205.webp",
    "212_tt4_main_206.webp",
    "213_tt4_main_207.webp",
    "214_tt4_main_208.webp",
    "215_tt4_main_209.webp",
    "216_tt4_main_210.webp",
    "217_tt4_main_211.webp",
    "218_tt4_main_212.webp",
    "219_tt4_main_213.webp",
    "220_tt4_main_214.webp",
    "221_tt4_main_215.webp",
    "222_tt4_main_216.webp",
    "223_tt4_main_217.webp",
    "224_tt4_main_218.webp",
    "225_tt4_main_219.webp",
    "226_tt4_main_220.webp",
    "227_tt4_main_221.webp",
    "228_tt4_main_222.webp",
    "229_tt4_main_223.webp",
    "230_tt4_main_224.webp",
    "231_tt4_main_225.webp",
    "232_tt4_main_226.webp",
    "233_tt4_main_227.webp",
    "234_tt4_main_228.webp",
    "235_tt4_main_229.webp",
    "236_tt4_main_230.webp",
    "237_tt4_main_231.webp",
    "238_tt4_main_232.webp",
    "239_tt4_main_233.webp",
    "240_tt4_main_234.webp",
    "241_tt4_main_235.webp",
    "242_tt4_main_236.webp",
    "243_tt4_main_237.webp",
    "244_tt4_main_238.webp",
    "245_tt4_main_239.webp",
    "246_tt4_main_240.webp",
    "247_tt4_main_241.webp",
    "248_tt4_main_242.webp",
    "249_tt4_main_243.webp",
    "250_tt4_main_244.webp",
    "251_tt4_main_245.webp",
    "252_tt4_main_246.webp",
    "253_tt4_main_247.webp",
    "254_tt4_main_248.webp",
    "255_tt4_main_249.webp",
    "256_tt4_main_250.webp",
    "257_tt4_main_251.webp",
    "258_tt4_main_252.webp",
    "259_tt4_main_253.webp",
    "260_tt4_main_254.webp",
    "261_tt4_main_255.webp",
    "262_tt4_main_256.webp",
    "263_tt4_main_257.webp",
    "264_tt4_main_258.webp",
    "265_tt4_main_259.webp",
    "266_tt4_main_260.webp",
    "267_tt4_main_261.webp",
    "268_tt4_main_262.webp",
    "269_tt4_main_263.webp",
    "270_tt4_main_264.webp",
    "271_tt4_main_265.webp",
    "272_tt4_main_266.webp",
    "273_tt4_main_267.webp",
    "274_tt4_main_268.webp",
    "275_tt4_main_269.webp",
    "276_tt4_main_270.webp",
    "277_tt4_main_271.webp",
    "278_tt4_main_272.webp",
    "279_tt4_main_273.webp",
    "280_tt4_main_274.webp",
    "281_tt4_main_275.webp",
    "282_tt4_main_276.webp",
    "283_tt4_main_277.webp",
    "284_tt4_main_278.webp",
    "285_tt4_main_279.webp",
    "286_tt4_main_280.webp",
    "287_tt4_main_281.webp",
    "288_tt4_main_282.webp",
    "289_tt4_main_283.webp",
    "290_tt4_main_284.webp",
    "291_tt4_main_285.webp",
    "292_tt4_main_286.webp",
    "293_tt4_main_287.webp",
    "294_tt4_main_288.webp",
    "295_tt4_main_289.webp",
    "296_tt4_main_290.webp",
    "297_tt4_main_291.webp",
    "298_tt4_main_292.webp",
    "299_tt4_main_293.webp",
    "300_tt4_main_294.webp",
    "301_tt4_main_295.webp",
    "302_tt4_main_296.webp",
    "303_tt4_main_297.webp",
    "304_tt4_main_298.webp",
    "305_tt4_main_299.webp",
    "306_tt4_main_300.webp",
    "307_tt4_main_301.webp",
    "308_tt4_main_302.webp",
    "309_tt4_main_303.webp",
    "310_tt4_main_304.webp",
    "311_tt4_main_305.webp",
    "312_tt4_main_306.webp",
    "313_tt4_main_307.webp",
    "314_tt4_main_308.webp",
    "315_tt4_main_309.webp",
    "316_tt4_main_310.webp",
    "317_tt4_main_311.webp",
    "318_tt4_main_312.webp",
    "319_tt4_main_313.webp",
    "320_tt4_main_314.webp",
    "321_tt4_main_315.webp",
    "322_tt4_main_316.webp",
    "323_tt4_main_317.webp",
    "324_tt4_main_318.webp",
    "325_tt4_main_319.webp",
    "326_tt4_main_320.webp",
    "327_tt4_main_321.webp",
    "328_tt4_main_322.webp",
    "329_tt4_main_323.webp",
    "330_tt4_main_324.webp",
    "331_tt4_main_325.webp",
    "332_tt4_main_326.webp",
    "333_tt4_main_327.webp"
    ];

    // Sample chapter and section structure
    const bookStructure = {
      "Front Matter": {
        start: 0,
        end: 5,
        sections: {
          "Cover": { start: 0, end: 1 },
          "Table of Contents": { start: 2, end: 4 },
          "Introduction": { start: 5, end: 5 }
        }
      },
      "Chapter 1: Fundamentals": {
        start: 6,
        end: 50,
        sections: {
          "Basic Concepts": { start: 6, end: 20 },
          "Advanced Principles": { start: 21, end: 35 },
          "Practical Applications": { start: 36, end: 50 }
        }
      },
      "Chapter 2: Advanced Techniques": {
        start: 51,
        end: 120,
        sections: {
          "Methodology": { start: 51, end: 70 },
          "Case Studies": { start: 71, end: 90 },
          "Implementation": { start: 91, end: 120 }
        }
      },
      "Chapter 3: Special Topics": {
        start: 121,
        end: 200,
        sections: {
          "Topic A": { start: 121, end: 150 },
          "Topic B": { start: 151, end: 175 },
          "Topic C": { start: 176, end: 200 }
        }
      },
      "Chapter 4: Applications": {
        start: 201,
        end: 280,
        sections: {
          "Real-world Examples": { start: 201, end: 230 },
          "Best Practices": { start: 231, end: 260 },
          "Future Directions": { start: 261, end: 280 }
        }
      },
      "Chapter 5: Reference": {
        start: 281,
        end: 332,
        sections: {
          "Appendix A": { start: 281, end: 300 },
          "Appendix B": { start: 301, end: 320 },
          "Index": { start: 321, end: 332 }
        }
      }
    };

    let index = 0;
    const base = "../webp/tt4_webp/";
    const chapterSelect = document.getElementById("chapter-select");
    const sectionSelect = document.getElementById("section-select");
    const sectionDropdown = document.getElementById("section-dropdown");
    const infoText = document.getElementById("info");

    // Initialize chapter dropdown
    function initChapterDropdown() {
      for (const chapterName in bookStructure) {
        const option = document.createElement("option");
        option.value = chapterName;
        option.textContent = chapterName;
        chapterSelect.appendChild(option);
      }
    }

    // Update section dropdown based on selected chapter
    function updateSectionDropdown(chapterName) {
      // Clear current sections
      sectionSelect.innerHTML = '<option value="">Select a Section</option>';
      
      if (chapterName && bookStructure[chapterName]) {
        const chapter = bookStructure[chapterName];
        
        // Show section dropdown
        sectionDropdown.classList.add("active");
        
        // Populate sections
        for (const sectionName in chapter.sections) {
          const option = document.createElement("option");
          option.value = sectionName;
          option.textContent = sectionName;
          sectionSelect.appendChild(option);
        }
        
        // Update info text
        infoText.textContent = `Chapter spans pages ${chapter.start + 1} to ${chapter.end + 1}`;
      } else {
        // Hide section dropdown if no chapter selected
        sectionDropdown.classList.remove("active");
        infoText.textContent = "";
      }
    }

    // Navigate to a specific page
    function goToPage(pageIndex) {
      if (pageIndex >= 0 && pageIndex < pages.length) {
        index = pageIndex;
        load();
      }
    }

    // Navigate to a chapter
    function goToChapter(chapterName) {
      if (bookStructure[chapterName]) {
        const chapter = bookStructure[chapterName];
        goToPage(chapter.start);
        updateSectionDropdown(chapterName);
      }
    }

    // Navigate to a section
    function goToSection(chapterName, sectionName) {
      if (bookStructure[chapterName] && bookStructure[chapterName].sections[sectionName]) {
        const section = bookStructure[chapterName].sections[sectionName];
        goToPage(section.start);
      }
    }

    function load() {
      document.getElementById("viewer").src = base + pages[index];
      document.getElementById("counter").innerText = 
        `Page ${index+1} of ${pages.length}`;
      
      // Update dropdowns to reflect current position
      updateDropdownsForCurrentPage();
    }

    function next() {
      index = (index + 1) % pages.length;
      load();
    }

    function prev() {
      index = (index - 1 + pages.length) % pages.length;
      load();
    }

    function goToPageNumber() {
      const pageNum = parseInt(document.getElementById("page-input").value);
      if (pageNum >= 1 && pageNum <= pages.length) {
        goToPage(pageNum - 1);
      }
    }

    // Update dropdowns based on current page
    function updateDropdownsForCurrentPage() {
      let currentChapter = "";
      let currentSection = "";
      
      // Find which chapter and section we're in
      for (const chapterName in bookStructure) {
        const chapter = bookStructure[chapterName];
        if (index >= chapter.start && index <= chapter.end) {
          currentChapter = chapterName;
          
          // Find which section we're in
          for (const sectionName in chapter.sections) {
            const section = chapter.sections[sectionName];
            if (index >= section.start && index <= section.end) {
              currentSection = sectionName;
              break;
            }
          }
          break;
        }
      }
      
      // Update dropdowns
      chapterSelect.value = currentChapter;
      updateSectionDropdown(currentChapter);
      sectionSelect.value = currentSection;
    }

    // Event listeners
    chapterSelect.addEventListener("change", function() {
      const selectedChapter = this.value;
      if (selectedChapter) {
        goToChapter(selectedChapter);
      } else {
        sectionDropdown.classList.remove("active");
        infoText.textContent = "";
      }
    });

    sectionSelect.addEventListener("change", function() {
      const selectedChapter = chapterSelect.value;
      const selectedSection = this.value;
      if (selectedChapter && selectedSection) {
        goToSection(selectedChapter, selectedSection);
      }
    });

    // Arrow keys
    document.addEventListener("keydown", e => {
      if (e.key === "ArrowRight") next();
      if (e.key === "ArrowLeft") prev();
    });

    // Initialize
    initChapterDropdown();
    load();
  }
</script>

</body>
</html>